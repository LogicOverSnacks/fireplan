<app-page-title (add)="addGraph()">Graphs</app-page-title>

<mat-accordion>
  @for (graph of graphs | async | keyvalue; track graph.key) {
      <mat-expansion-panel>
        <mat-expansion-panel-header>
          <span class="name">{{graph.key}}</span>
        </mat-expansion-panel-header>

        <app-graph-preview [graph]="graph.value"></app-graph-preview>
      </mat-expansion-panel>

      <!--
        <button mat-icon-button (click)="editGraph(graph.key, graph.value)" matTooltip="Edit">
          <mat-icon>edit</mat-icon>
        </button>
        <button mat-icon-button (click)="deleteGraph(graph.key)" matTooltip="Delete">
          <mat-icon>delete</mat-icon>
        </button>
      -->
  }
</mat-accordion>

<form class="graph-selection" [formGroup]="form">
  <mat-form-field subscriptSizing="dynamic">
    <mat-label>Inflation</mat-label>
    <mat-select formControlName="inflation">
      @for (graph of graphs | async | keyvalue; track graph.key) {
        <mat-option [value]="graph.key">{{graph.key}}</mat-option>
      }
    </mat-select>
  </mat-form-field>

  <mat-form-field subscriptSizing="dynamic">
    <mat-label>Cash</mat-label>
    <mat-select formControlName="cash">
      @for (graph of graphs | async | keyvalue; track graph.key) {
        <mat-option [value]="graph.key">{{graph.key}}</mat-option>
      }
    </mat-select>
  </mat-form-field>

  <mat-form-field subscriptSizing="dynamic">
    <mat-label>Bonds</mat-label>
    <mat-select formControlName="bonds">
      @for (graph of graphs | async | keyvalue; track graph.key) {
        <mat-option [value]="graph.key">{{graph.key}}</mat-option>
      }
    </mat-select>
  </mat-form-field>

  <mat-form-field subscriptSizing="dynamic">
    <mat-label>Stocks</mat-label>
    <mat-select formControlName="stocks">
      @for (graph of graphs | async | keyvalue; track graph.key) {
        <mat-option [value]="graph.key">{{graph.key}}</mat-option>
      }
    </mat-select>
  </mat-form-field>

  <mat-form-field subscriptSizing="dynamic">
    <mat-label>Crypto</mat-label>
    <mat-select formControlName="crypto">
      @for (graph of graphs | async | keyvalue; track graph.key) {
        <mat-option [value]="graph.key">{{graph.key}}</mat-option>
      }
    </mat-select>
  </mat-form-field>
</form>
